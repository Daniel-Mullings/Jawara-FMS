<%- include('partials/header') %>
<body class="register_body vh-100" style="background-color: #e3e3e4;">
    <div class="container py-5 h-100">
    <!-- Background image -->
    <!--<div class="login_page"> -->
        <div class="row d-flex justify-content-center align-items-center h-100">
            <div class="col col-xl-10">
                <div class="card" style="border-radius: 1rem" style="box-shadow: 0 0 40px rgba(0,0,0,0.2);">
                    <div class="row g-0">
                        <div class="col-md-6 col-lg-5 d-none d-md-block">
                        <img src="https://images.unsplash.com/photo-1566888596782-c7f41cc184c5?ixlib=rb-1.2.1&auto=format&fit=crop&w=2134&q=80"
                            alt="login form" class="img-fluid" style="border-radius: 1rem 0 0 1rem;" style="height: 100%;" />
                        </div>
                        <div class="col-md-6 col-lg-7 d-flex align-items-center">
                            <div class="card-body p-4 p-lg-5 text-black">
                                
                                <form class="form" id="createAccount" action="/register" method="post">
                                    <h5 class="fw-normal mb-3 pb-3 form_header" style="letter-spacing: 1px;">Create Account</h5>
                                    <div class="form-group pb-3 form_input">
                                        <input type="text" id="fullName" class="form-control form-control-lg" name="name" placeholder="Full name"/>
                                    </div>

                                    <div class="form-group pb-3 form_input">
                                        <input type="email" id="registerEmail" class="form-control form-control-lg" name="newEmail" placeholder="Email"/>
                                    </div>
            
                                    <div class="form-group pb-3">
                                        <input type="password" id="registerPassword" class="form-control form-control-lg" name="newPassword" placeholder="Password"/>
                                    </div>

                                    <div class="pt-1 mb-4">
                                        <button id="submit_button" class="btn btn-dark w-100 btn-lg btn-block" type="button">Sign Up</button>
                                    </div>

                                    <br>
                                    <p class="mb-5 pb-lg-2" style="color: #393f81;">Already have an account? <a href="login"
                                        style="color: #393f81;">Sign in</a></p>
                                    <a href="#!" class="small text-muted">Terms of use.</a>
                                    <a href="#!" class="small text-muted">Privacy policy</a>
                                </form>

                            </div>
                        </div> 
                    </div>   
                </div>
            </div>
        </div>
    </div>
    
    <script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios@1.1.2/dist/axios.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.1.min.js"></script>
    <script>
        (document).ready(function(){
        $("#submit_button").on("click", function(){
            console.log($("#fullNname").val(), $("#registerEmail").val(), $("#registerPassword").val());
            axios.post('http://localhost:3000/register', {
                name: $("#fullName").val(),
                email: $("#registerEmail").val(),
                password: $("#registerPassword").val()
            })
            .then(function (response) {
                console.log($("#fullNname").val(), $("#registerEmail").val(), $("#registerPassword").val());
                console.log(response);
                Swal.fire({
                title: "Great!",
                text: "You've succesfully created your account",
                icon: 'success',
                confirmButtonText: 'continue',
                confirmButtonColor: "green"
            }).then(function(){
                window.location = "/";
            });
            })
            .catch(function (error) {
                console.log("yo");
                console.log(error);
                Swal.fire({
                title: 'Account registry failed!',
                text: 'Try entering your details again',
                icon: 'error',
                confirmButtonText: 'try again',
                confirmButtonColor: "red"
            });
            });
            });
            }); 
    </script>
</body>
<%- include('partials/footer') %>